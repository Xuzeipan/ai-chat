# TypeScript 类型定义案例 - 模式系统

## 1. Mode 接口定义

```typescript
// 模式类型
interface Mode {
  id: string;              // 模式唯一标识
  name: string;            // 模式名称
  description: string;     // 模式描述
  systemPrompt: string;    // 系统提示词
  contextLength: number;   // 保留的对话条数
  icon?: string;           // 模式图标（可选）
}
```

## 2. StreamChunk 接口定义

```typescript
// 流式响应的数据块类型
interface StreamChunk {
  done: boolean;           // 是否完成
  message?: {
    role: string;          // 消息角色
    content: string;       // 消息内容片段
  };
}
```

## 3. AppState 类型扩展

```typescript
// 假设已有基础类型
interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
}

// 应用状态（扩展版）
interface AppState {
  messages: Message[];
  loading: boolean;
  error: string | null;
  currentMode: Mode;        // 当前模式
  modes: Mode[];            // 所有可用模式
}
```

## 4. 实际使用示例

```typescript
// 在组件中使用
import { useState } from 'react';

function App() {
  const [state, setState] = useState<AppState>({
    messages: [],
    loading: false,
    error: null,
    currentMode: MODES[0],  // 默认使用第一个模式
    modes: MODES,
  });

  const handleModeChange = (mode: Mode) => {
    setState(prev => ({
      ...prev,
      currentMode: mode,
    }));
  };

  return (
    <div>
      <ModeSelector
        modes={state.modes}
        currentMode={state.currentMode}
        onModeChange={handleModeChange}
      />
      {/* 其他组件 */}
    </div>
  );
}
```

## 5. 类型工具示例

```typescript
// 提取模式的 ID 类型
type ModeId = Mode['id'];

// 部分更新模式
type PartialMode = Partial<Mode>;

// 创建新模式的必需属性
type CreateMode = Required<Pick<Mode, 'id' | 'name' | 'systemPrompt' | 'contextLength'>>;
```

## 你的任务

在 `src/types/index.ts` 中添加以下类型：

1. **Mode 接口**：包含 id、name、description、systemPrompt、contextLength、icon
2. **StreamChunk 接口**：包含 done、message（role、content）
3. **扩展 AppState**：添加 currentMode 和 modes 字段

试试看，写完后告诉我："我写好了，你检查一下 @src/types/index.ts"